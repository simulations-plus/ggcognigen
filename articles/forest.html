<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forest plot creation with ggcognigen • ggcognigen</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Forest plot creation with ggcognigen">
<meta property="og:description" content="ggcognigen">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggcognigen</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/forest.html">Forest plot creation with ggcognigen</a>
    </li>
    <li>
      <a href="../articles/intro.html">Introduction to ggcognigen</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/simulations-plus/ggcognigen/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Forest plot creation with ggcognigen</h1>
                        <h4 data-toc-skip class="author">Sebastien
Bihorel</h4>
                                    <h4 data-toc-skip class="author">for
Cognigen, a SimulationsPlus Company</h4>
                        
      
      <small class="dont-index">Source: <a href="https://github.com/simulations-plus/ggcognigen/blob/HEAD/vignettes/forest.Rmd" class="external-link"><code>vignettes/forest.Rmd</code></a></small>
      <div class="hidden name"><code>forest.Rmd</code></div>

    </div>

    
    
<style>
#TOC {
  background: url("../man/figures/simulations-favicon-100x100.png");
  background-size: contain;
  padding-top: 100px !important;
  background-repeat: no-repeat;
}
</style>
<p><br></p>
<p>The creation of forest plots with <code>ggcognigen</code> is
supported by 3 functions:</p>
<ul>
<li>
<code>make_gmr_data</code>: to calculate the geometric means (GM)
and geometric mean ratios (GMR) of selected variables for a select list
of covariates;</li>
<li>
<code>make_forestplot</code>: to create forest plots based upon a
data object that is typically returned by the previous function;
and</li>
<li>
<code>make_gmr_table</code>: to create corresponding report-ready
tables in HTML, Microsoft Word, or PharmTeX-compliant format.</li>
</ul>
<p>The <code>make_gmr_data</code> and <code>make_forest_plot</code>
functions accept both standard and non-standard evaluation notations.
Click <a href="#NSE">here</a> to see an example.</p>
<div class="section level2">
<h2 id="make_gmr_data">
<code>make_gmr_data</code><a class="anchor" aria-label="anchor" href="#make_gmr_data"></a>
</h2>
<p>The data to be processed by <code>make_gmr_data</code> must meet the
following expectations:</p>
<ol style="list-style-type: decimal">
<li>The data object must a single data.frame object.</li>
<li>The data in this data.frame object must be provided in wide
format.</li>
<li>It must contain a variable that uniquely identify individuals.</li>
<li>It must contain one record per individual and, if requested, per
stratification variable. In any cases, <code>make_gmr_data</code>
internally filters the provided data.frame to the first record per
individual and, if requested, per stratification variable.</li>
<li>The variables for which the GMs and GMRs are calculated must be
continuous variables.</li>
<li>The covariates defining the groups according to which the GMs and
GMRs are calculated must be factor variables.</li>
</ol>
<p>The creation of such data objects is out of the scope of this
vignette.</p>
<p>The operation of the <code>make_gmr_data</code> is explained in the
examples shown below, starting from a basic case and finishing with the
use of advanced settings. All examples rely on a dataset called
<code>expo</code> which is distributed within the
<code>ggcognigen</code> package. The <code>expo</code> dataset provides
3 steady-state exposures (AUCSS, CMAXSS, and CMINSS) that were predicted
in a small population of individuals at 3 different dose levels (25, 50,
and 100 mg), using a 1-compartment model with dose-dependent absorption.
The dataset also includes the individual values of pharmacokinetic
parameters (CL, V, KA, and F1) and several covariate values.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">glimpse</span><span class="op">(</span><span class="va">expo</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 2,436</span></span>
<span><span class="co">#&gt; Columns: 17</span></span>
<span><span class="co">#&gt; $ ID     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, …</span></span>
<span><span class="co">#&gt; $ DOSE   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> 25 mg, 25 mg, 25 mg, 25 mg, 25 mg, 25 mg, 25 mg, 25 mg, 25 mg, …</span></span>
<span><span class="co">#&gt; $ AGE    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "[18,45)", "[65,90]", "[45,65)", "[18,45)", "[18,45)", "[18,45)…</span></span>
<span><span class="co">#&gt; $ WTKG   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "[70.2,80)", "[89.1,100)", "[36,70.2)", "[80,89.1)", "[70.2,80)…</span></span>
<span><span class="co">#&gt; $ BMI    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "[14.1,25)", "[30,40)", "[25,30)", "[30,40)", "[30,40)", "[14.1…</span></span>
<span><span class="co">#&gt; $ SEXF   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Male, Female, Male, Female, Male, Female, Male, Female, Male, M…</span></span>
<span><span class="co">#&gt; $ RFCAT  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Severe Impairment, Mild Impairment, Moderate Impairment, Severe…</span></span>
<span><span class="co">#&gt; $ CPCAT  <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Normal, Severe Impairment, Normal, Severe Impairment, Normal, M…</span></span>
<span><span class="co">#&gt; $ HFM    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> High fat meal, Fasted, High fat meal, Fasted, Fasted, High fat …</span></span>
<span><span class="co">#&gt; $ CL     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 12.0860, 18.9160, 19.1000, 14.2270, 11.2520, 9.3767, 8.0459, 11…</span></span>
<span><span class="co">#&gt; $ V      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 131.130, 233.300, 116.880, 237.340, 117.420, 94.863, 132.580, 2…</span></span>
<span><span class="co">#&gt; $ KA     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.34605, 1.10200, 0.32781, 1.03850, 0.68898, 0.97022, 0.99181, …</span></span>
<span><span class="co">#&gt; $ F1     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.19111, 0.30985, 0.28215, 0.32590, 0.35001, 0.23855, 0.29454, …</span></span>
<span><span class="co">#&gt; $ AUCSS  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 395.31, 409.51, 369.31, 572.68, 777.66, 636.02, 915.19, 746.19,…</span></span>
<span><span class="co">#&gt; $ TMAXSS <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4.7552, 2.4050, 4.1152, 2.6379, 3.1476, 2.5088, 2.7155, 4.2910,…</span></span>
<span><span class="co">#&gt; $ CMAXSS <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 26.396, 31.874, 31.427, 38.424, 61.260, 54.106, 61.414, 43.756,…</span></span>
<span><span class="co">#&gt; $ CMINSS <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6.0931, 5.9732, 2.3850, 11.3320, 9.6471, 7.2002, 17.9770, 17.24…</span></span></code></pre></div>
<div class="section level3">
<h3 id="case-1-basic-use">Case 1: Basic use<a class="anchor" aria-label="anchor" href="#case-1-basic-use"></a>
</h3>
<p>The following example illustrates the simplest use case for
<code>make_gmr_data</code> in which GMs and GMRs are calculated for a
single exposure variable without data stratification and using default
settings. By default, a 90% confidence interval is calculated for each
GM and GMR. A subset of the data corresponding to the exposures obtained
at 25 mg is used.</p>
<p>Note that, by default, the function prints information to the console
while it executes. In case the call exits prematurely, this information
should help the users identify which part of the data is not compatible
with <code>make_gmr_data</code> expectations.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expo25</span> <span class="op">&lt;-</span> <span class="va">expo</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">DOSE</span> <span class="op">==</span> <span class="st">'25 mg'</span><span class="op">)</span></span>
<span><span class="va">gmr25_aucss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_gmr_data.html">make_gmr_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">expo25</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">'AUCSS'</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">'ID'</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AGE'</span>, <span class="st">'WTKG'</span>, <span class="st">'BMI'</span>, <span class="st">'SEXF'</span>, <span class="st">'RFCAT'</span>, <span class="st">'CPCAT'</span>, <span class="st">'HFM'</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Data file contains 812 rows and 17 columns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Processing AUCSS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Processing AGE - Frequency table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [18,45) [45,65) [65,90] </span></span>
<span><span class="co">#&gt;     404     303     105</span></span>
<span><span class="co">#&gt; ... processing group: [18,45)</span></span>
<span><span class="co">#&gt; ... processing group: [45,65)</span></span>
<span><span class="co">#&gt; ... processing group: [65,90]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Processing WTKG - Frequency table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  [36,70.2)  [70.2,80)  [80,89.1) [89.1,100)  [100,175] </span></span>
<span><span class="co">#&gt;        162        153        172        161        164</span></span>
<span><span class="co">#&gt; ... processing group: [36,70.2)</span></span>
<span><span class="co">#&gt; ... processing group: [70.2,80)</span></span>
<span><span class="co">#&gt; ... processing group: [80,89.1)</span></span>
<span><span class="co">#&gt; ... processing group: [89.1,100)</span></span>
<span><span class="co">#&gt; ... processing group: [100,175]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Processing BMI - Frequency table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [14.1,25)   [25,30)   [30,40) [40,57.9] </span></span>
<span><span class="co">#&gt;       159       198       400        55</span></span>
<span><span class="co">#&gt; ... processing group: [14.1,25)</span></span>
<span><span class="co">#&gt; ... processing group: [25,30)</span></span>
<span><span class="co">#&gt; ... processing group: [30,40)</span></span>
<span><span class="co">#&gt; ... processing group: [40,57.9]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Processing SEXF - Frequency table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Male Female </span></span>
<span><span class="co">#&gt;    375    437</span></span>
<span><span class="co">#&gt; ... processing group: Male</span></span>
<span><span class="co">#&gt; ... processing group: Female</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Processing RFCAT - Frequency table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;              Normal     Mild Impairment Moderate Impairment   Severe Impairment </span></span>
<span><span class="co">#&gt;                 294                 237                 165                 116</span></span>
<span><span class="co">#&gt; ... processing group: Normal</span></span>
<span><span class="co">#&gt; ... processing group: Mild Impairment</span></span>
<span><span class="co">#&gt; ... processing group: Moderate Impairment</span></span>
<span><span class="co">#&gt; ... processing group: Severe Impairment</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Processing CPCAT - Frequency table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;              Normal     Mild Impairment Moderate Impairment   Severe Impairment </span></span>
<span><span class="co">#&gt;                 292                 235                 161                 124</span></span>
<span><span class="co">#&gt; ... processing group: Normal</span></span>
<span><span class="co">#&gt; ... processing group: Mild Impairment</span></span>
<span><span class="co">#&gt; ... processing group: Moderate Impairment</span></span>
<span><span class="co">#&gt; ... processing group: Severe Impairment</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Processing HFM - Frequency table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;        Fasted High fat meal </span></span>
<span><span class="co">#&gt;           557           255</span></span>
<span><span class="co">#&gt; ... processing group: Fasted</span></span>
<span><span class="co">#&gt; ... processing group: High fat meal</span></span></code></pre></div>
<p><code>make_gmr_data</code> returns a data.frame with one row per
variable provided in the <code>covariates</code> argument and per level
in these variables. The variables in this data.frame are:</p>
<ul>
<li>
<code>x_var</code>: the variable(s) defined in the
<code>x_var</code> argument;</li>
<li>
<code>y_var</code>: one of the variables defined in the
<code>covariates</code> argument;</li>
<li>
<code>y_label</code>: the labels associated with each variable
defined in the <code>covariates</code> argument. It could be either the
name of the variables or their ‘label’ attributes if they are defined in
the input data; Alternatively, it could be one of the user-provided
labels (see Case 4);</li>
<li>
<code>by</code>: one of the level of the variable defined in the
optional <code>by</code> argument (see Case 3);</li>
<li>
<code>value</code>: one of the level of the <code>covariates</code>
variables;</li>
<li>
<code>n</code>: the number of individuals included in this
particular level of <code>y_var</code> and <code>by</code>; records with
missing value of <code>x_var</code> are excluded);</li>
<li>
<code>reference</code>: a logical variable defining whether this
particular level of <code>y_var</code> is the reference for the
calculation of GMRs. By default, the first level of the factor is
assumed to be the reference level. Alternatively, users can defines the
reference levels (see Case 4);</li>
<li>gm: the GM value for this particular level of <code>y_var</code> and
<code>by</code>;</li>
<li>gm_lo: the lower limit of the GM confidence interval;</li>
<li>gm_hi: the upper limit of the GM confidence interval;</li>
<li>gm_label: the GM label; structured as X1 [X2, X3], where X1 is gm},
X2 is <code>gm_lo</code>, X3 is <code>gm_hi</code>. By default, X1, X2,
and X3 are formatted to 3 significant digits; alternatively, users can
set the number of significant digits to use (see Case 4);</li>
<li>gmr: the GMR value for this particular level of <code>y_var</code>
and <code>by</code>with respect to the reference level;</li>
<li>gmr_lo: the lower limit of the GMR confidence interval;</li>
<li>gmr_hi: the upper limit of the GMR confidence interval;</li>
<li>gmr_label: the GMR label; structured as X1 [X2, X3], where X1 is
<code>gmr</code>, X2 is <code>gmr_lo</code>, X3 is <code>gmr_hi</code>.
By default, X1, X2, and X3 are formatted to 3 significant digits;</li>
<li>gmr_n_label: the GMR label with <code>n</code>; structured as X1
[X2, X3] n = X4, where X1 is <code>gmr</code>, X2 is
<code>gmr_lo</code>, X3 is <code>gmr_hi</code>, X4 is <code>n</code>. By
default, X1, X2, and X3 are formatted to 3 significant digits. This
label also includes a dynamically set number of tab characters to
vertically align the display of the n’s in the forest plot.</li>
</ul>
<p><code>y_var</code>, <code>y_label</code>, and <code>value</code> are
coerced to factors to facilitate plotting using
<code>make_forestplot</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">glimpse</span><span class="op">(</span><span class="va">gmr25_aucss</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 24</span></span>
<span><span class="co">#&gt; Columns: 15</span></span>
<span><span class="co">#&gt; $ x_var       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUC…</span></span>
<span><span class="co">#&gt; $ y_var       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> AGE, AGE, AGE, WTKG, WTKG, WTKG, WTKG, WTKG, BMI, BMI, BMI…</span></span>
<span><span class="co">#&gt; $ y_label     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Age (y), Age (y), Age (y), Body weight (kg), Body weight (…</span></span>
<span><span class="co">#&gt; $ value       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "[18,45)", "[45,65)", "[65,90]", "[36,70.2)", "[70.2,80)",…</span></span>
<span><span class="co">#&gt; $ n           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 404, 303, 105, 162, 153, 172, 161, 164, 159, 198, 400, 55,…</span></span>
<span><span class="co">#&gt; $ reference   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> TRUE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, TRUE…</span></span>
<span><span class="co">#&gt; $ gm          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 575.9795, 567.9549, 585.6130, 721.3997, 581.2538, 595.3270…</span></span>
<span><span class="co">#&gt; $ gm_lo       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 285.1323, 261.7887, 292.5570, 354.0173, 296.1954, 323.8345…</span></span>
<span><span class="co">#&gt; $ gm_hi       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1168.0831, 1059.6106, 1078.7000, 1327.8391, 1144.5246, 103…</span></span>
<span><span class="co">#&gt; $ gm_label    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "576 [285, 1170]", "568 [262, 1060]", "586 [293, 1080]", "…</span></span>
<span><span class="co">#&gt; $ gmr         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 0.9860680, 1.0167254, 1.0000000, 0.8057306, 0.8…</span></span>
<span><span class="co">#&gt; $ gmr_lo      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 0.9328615, 0.9403559, 1.0000000, 0.7458953, 0.7…</span></span>
<span><span class="co">#&gt; $ gmr_hi      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 1.0423091, 1.0992972, 1.0000000, 0.8703658, 0.8…</span></span>
<span><span class="co">#&gt; $ gmr_label   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 [1, 1]", "0.986 [0.933, 1.04]", "1.02 [0.94, 1.1]", "1 …</span></span>
<span><span class="co">#&gt; $ gmr_n_label <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 [1, 1]\t\t\t\tn = 404", "0.986 [0.933, 1.04]\tn = 303",…</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-2-multiple-exposures">Case 2: Multiple exposures<a class="anchor" aria-label="anchor" href="#case-2-multiple-exposures"></a>
</h3>
<p>GMs and GMRs can be calculated for multiple exposure variables at the
same call. In the example below, the <code>silent</code> argument is set
to TRUE to suppress the display of information during execution.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr25_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_gmr_data.html">make_gmr_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">expo25</span>,</span>
<span>  x_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AUCSS'</span>, <span class="st">'CMAXSS'</span>, <span class="st">'CMINSS'</span><span class="op">)</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">'ID'</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AGE'</span>, <span class="st">'WTKG'</span>, <span class="st">'BMI'</span>, <span class="st">'SEXF'</span>, <span class="st">'RFCAT'</span>, <span class="st">'CPCAT'</span>, <span class="st">'HFM'</span><span class="op">)</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">gmr25_all</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 72</span></span>
<span><span class="co">#&gt; Columns: 15</span></span>
<span><span class="co">#&gt; $ x_var       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUC…</span></span>
<span><span class="co">#&gt; $ y_var       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> AGE, AGE, AGE, WTKG, WTKG, WTKG, WTKG, WTKG, BMI, BMI, BMI…</span></span>
<span><span class="co">#&gt; $ y_label     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Age (y), Age (y), Age (y), Body weight (kg), Body weight (…</span></span>
<span><span class="co">#&gt; $ value       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "[18,45)", "[45,65)", "[65,90]", "[36,70.2)", "[70.2,80)",…</span></span>
<span><span class="co">#&gt; $ n           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 404, 303, 105, 162, 153, 172, 161, 164, 159, 198, 400, 55,…</span></span>
<span><span class="co">#&gt; $ reference   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> TRUE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, TRUE…</span></span>
<span><span class="co">#&gt; $ gm          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 575.97951, 567.95494, 585.61302, 721.39966, 581.25377, 595…</span></span>
<span><span class="co">#&gt; $ gm_lo       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 285.13228, 261.78865, 292.55695, 354.01730, 296.19541, 323…</span></span>
<span><span class="co">#&gt; $ gm_hi       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1168.08314, 1059.61063, 1078.70000, 1327.83907, 1144.52458…</span></span>
<span><span class="co">#&gt; $ gm_label    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "576 [285, 1170]", "568 [262, 1060]", "586 [293, 1080]", "…</span></span>
<span><span class="co">#&gt; $ gmr         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 0.9860680, 1.0167254, 1.0000000, 0.8057306, 0.8…</span></span>
<span><span class="co">#&gt; $ gmr_lo      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 0.9328615, 0.9403559, 1.0000000, 0.7458953, 0.7…</span></span>
<span><span class="co">#&gt; $ gmr_hi      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 1.0423091, 1.0992972, 1.0000000, 0.8703658, 0.8…</span></span>
<span><span class="co">#&gt; $ gmr_label   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 [1, 1]", "0.986 [0.933, 1.04]", "1.02 [0.94, 1.1]", "1 …</span></span>
<span><span class="co">#&gt; $ gmr_n_label <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 [1, 1]\t\t\t\tn = 404", "0.986 [0.933, 1.04]\tn = 303",…</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">gmr25_all</span><span class="op">$</span><span class="va">x_var</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "AUCSS"  "CMAXSS" "CMINSS"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-3-stratification">Case 3: Stratification<a class="anchor" aria-label="anchor" href="#case-3-stratification"></a>
</h3>
<p>GMs and GMRs can be calculated using stratification if necessary. A
single stratification variable can be set in the <code>by</code>
argument. In the example below, the whole <code>expo</code> data.frame
is used and the calculation are stratification by DOSE.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_gmr_data.html">make_gmr_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">expo</span>,</span>
<span>  x_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AUCSS'</span>, <span class="st">'CMAXSS'</span>, <span class="st">'CMINSS'</span><span class="op">)</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">'ID'</span>,</span>
<span>  by <span class="op">=</span> <span class="st">'DOSE'</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AGE'</span>, <span class="st">'WTKG'</span>, <span class="st">'BMI'</span>, <span class="st">'SEXF'</span>, <span class="st">'RFCAT'</span>, <span class="st">'CPCAT'</span>, <span class="st">'HFM'</span><span class="op">)</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">gmr_all</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 216</span></span>
<span><span class="co">#&gt; Columns: 16</span></span>
<span><span class="co">#&gt; $ x_var       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUC…</span></span>
<span><span class="co">#&gt; $ y_var       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> AGE, AGE, AGE, AGE, AGE, AGE, AGE, AGE, AGE, WTKG, WTKG, W…</span></span>
<span><span class="co">#&gt; $ y_label     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> Age (y), Age (y), Age (y), Age (y), Age (y), Age (y), Age …</span></span>
<span><span class="co">#&gt; $ by          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> 25 mg, 25 mg, 25 mg, 50 mg, 50 mg, 50 mg, 100 mg, 100 mg, …</span></span>
<span><span class="co">#&gt; $ value       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "[18,45)", "[45,65)", "[65,90]", "[18,45)", "[45,65)", "[6…</span></span>
<span><span class="co">#&gt; $ n           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 404, 303, 105, 404, 303, 105, 404, 303, 105, 162, 153, 172…</span></span>
<span><span class="co">#&gt; $ reference   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> TRUE, FALSE, FALSE, TRUE, FALSE, FALSE, TRUE, FALSE, FALSE…</span></span>
<span><span class="co">#&gt; $ gm          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 575.9795, 567.9549, 585.6130, 1722.9866, 1699.9180, 1750.4…</span></span>
<span><span class="co">#&gt; $ gm_lo       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 285.1323, 261.7887, 292.5570, 881.3175, 797.9824, 904.2484…</span></span>
<span><span class="co">#&gt; $ gm_hi       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1168.0831, 1059.6106, 1078.7000, 3442.7852, 3123.0124, 317…</span></span>
<span><span class="co">#&gt; $ gm_label    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "576 [285, 1170]", "568 [262, 1060]", "586 [293, 1080]", "…</span></span>
<span><span class="co">#&gt; $ gmr         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 0.9860680, 1.0167254, 1.0000000, 0.9866113, 1.0…</span></span>
<span><span class="co">#&gt; $ gmr_lo      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 0.9328615, 0.9403559, 1.0000000, 0.9349233, 0.9…</span></span>
<span><span class="co">#&gt; $ gmr_hi      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 1.0423091, 1.0992972, 1.0000000, 1.0411569, 1.0…</span></span>
<span><span class="co">#&gt; $ gmr_label   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 [1, 1]", "0.986 [0.933, 1.04]", "1.02 [0.94, 1.1]", "1 …</span></span>
<span><span class="co">#&gt; $ gmr_n_label <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 [1, 1]\t\t\t\tn = 404", "0.986 [0.933, 1.04]\tn = 303",…</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">gmr_all</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'x_var'</span>, <span class="st">'by'</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;      x_var     by</span></span>
<span><span class="co">#&gt; 1    AUCSS  25 mg</span></span>
<span><span class="co">#&gt; 4    AUCSS  50 mg</span></span>
<span><span class="co">#&gt; 7    AUCSS 100 mg</span></span>
<span><span class="co">#&gt; 110 CMAXSS  25 mg</span></span>
<span><span class="co">#&gt; 410 CMAXSS  50 mg</span></span>
<span><span class="co">#&gt; 73  CMAXSS 100 mg</span></span>
<span><span class="co">#&gt; 112 CMINSS  25 mg</span></span>
<span><span class="co">#&gt; 412 CMINSS  50 mg</span></span>
<span><span class="co">#&gt; 74  CMINSS 100 mg</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="case-4-advanced-settings">Case 4: Advanced settings<a class="anchor" aria-label="anchor" href="#case-4-advanced-settings"></a>
</h3>
<p>This example illustrates the use of advanced settings.</p>
<ul>
<li>First, a vector of integers are passed to the
<code>ref_levels</code> argument: this vector provides the positions of
the reference levels among the possible levels in each covariate
variable; this vector must have the same length as the
<code>covariates</code> argument.</li>
<li>Second, custom labels are provided of the <code>covariates</code>
variable using the <code>labels</code> argument. This must be a vector
of of <code>character</code> objects or <code>expression</code> objects
with the same length as the <code>covariates</code> argument.</li>
<li>Third, a custom number of significant digit for the formatting of GM
and GMR labels is set using the <code>digits</code> argument.</li>
<li>Last, a 95% CI is requested using the <code>ci</code> argument.</li>
</ul>
<p>Note that all labels must be set as expression objects, if at least
one of the label must be an expression. Also note the use of the
<code>~</code> character to include spaces between label words. This is
technically not necessary to define expressions, but the renderer
function used in <code>make_forestplot</code> makes this syntax
necessary.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_gmr_data.html">make_gmr_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">expo</span>,</span>
<span>  x_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AUCSS'</span>, <span class="st">'CMAXSS'</span>, <span class="st">'CMINSS'</span><span class="op">)</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">'ID'</span>,</span>
<span>  by <span class="op">=</span> <span class="st">'DOSE'</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AGE'</span>, <span class="st">'WTKG'</span>, <span class="st">'BMI'</span>, <span class="st">'SEXF'</span>, <span class="st">'RFCAT'</span>, <span class="st">'CPCAT'</span>, <span class="st">'HFM'</span><span class="op">)</span>,</span>
<span>  ref_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Age'</span><span class="op">~</span><span class="st">'(y)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Weight'</span><span class="op">~</span><span class="st">'(kg)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Mass'</span><span class="op">~</span><span class="st">'Index'</span><span class="op">~</span><span class="st">'(kg/'</span><span class="op">*</span><span class="va">m</span><span class="op">^</span><span class="fl">2</span><span class="op">*</span><span class="st">')'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Sex'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Renal'</span><span class="op">~</span><span class="st">'Function'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Hepatic'</span><span class="op">~</span><span class="st">'Function'</span><span class="op">~</span><span class="st">'(Child-Pugh)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Meal'</span><span class="op">~</span><span class="st">'Status'</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  ci <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">gmr_all</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 216</span></span>
<span><span class="co">#&gt; Columns: 16</span></span>
<span><span class="co">#&gt; $ x_var       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUCSS", "AUC…</span></span>
<span><span class="co">#&gt; $ y_var       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> AGE, AGE, AGE, AGE, AGE, AGE, AGE, AGE, AGE, WTKG, WTKG, W…</span></span>
<span><span class="co">#&gt; $ y_label     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "Age" ~ "(y)", "Age" ~ "(y)", "Age" ~ "(y)", "Age" ~ "(y)"…</span></span>
<span><span class="co">#&gt; $ by          <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> 25 mg, 25 mg, 25 mg, 50 mg, 50 mg, 50 mg, 100 mg, 100 mg, …</span></span>
<span><span class="co">#&gt; $ value       <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> "[45,65)", "[18,45)", "[65,90]", "[45,65)", "[18,45)", "[6…</span></span>
<span><span class="co">#&gt; $ n           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 303, 404, 105, 303, 404, 105, 303, 404, 105, 172, 162, 153…</span></span>
<span><span class="co">#&gt; $ reference   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> TRUE, FALSE, FALSE, TRUE, FALSE, FALSE, TRUE, FALSE, FALSE…</span></span>
<span><span class="co">#&gt; $ gm          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 567.9549, 575.9795, 585.6130, 1699.9180, 1722.9866, 1750.4…</span></span>
<span><span class="co">#&gt; $ gm_lo       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 261.7887, 285.1323, 292.5570, 797.9824, 881.3175, 904.2484…</span></span>
<span><span class="co">#&gt; $ gm_hi       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1059.6106, 1168.0831, 1078.7000, 3123.0124, 3442.7852, 317…</span></span>
<span><span class="co">#&gt; $ gm_label    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "568 [261.8, 1060]", "576 [285.1, 1168]", "585.6 [292.6, 1…</span></span>
<span><span class="co">#&gt; $ gmr         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 1.0141289, 1.0310906, 1.0000000, 1.0135704, 1.0…</span></span>
<span><span class="co">#&gt; $ gmr_lo      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 0.9492420, 0.9363440, 1.0000000, 0.9505949, 0.9…</span></span>
<span><span class="co">#&gt; $ gmr_hi      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.0000000, 1.0834512, 1.1354245, 1.0000000, 1.0807179, 1.1…</span></span>
<span><span class="co">#&gt; $ gmr_label   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 [1, 1]", "1.014 [0.9492, 1.083]", "1.031 [0.9363, 1.135…</span></span>
<span><span class="co">#&gt; $ gmr_n_label <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "1 [1, 1]\t\t\t\t\tn = 303", "1.014 [0.9492, 1.083]\t\tn =…</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">gmr_all</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'x_var'</span>, <span class="st">'by'</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;      x_var     by</span></span>
<span><span class="co">#&gt; 1    AUCSS  25 mg</span></span>
<span><span class="co">#&gt; 4    AUCSS  50 mg</span></span>
<span><span class="co">#&gt; 7    AUCSS 100 mg</span></span>
<span><span class="co">#&gt; 110 CMAXSS  25 mg</span></span>
<span><span class="co">#&gt; 410 CMAXSS  50 mg</span></span>
<span><span class="co">#&gt; 73  CMAXSS 100 mg</span></span>
<span><span class="co">#&gt; 112 CMINSS  25 mg</span></span>
<span><span class="co">#&gt; 412 CMINSS  50 mg</span></span>
<span><span class="co">#&gt; 74  CMINSS 100 mg</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="additional-settings">Additional settings<a class="anchor" aria-label="anchor" href="#additional-settings"></a>
</h3>
<p>The <code>paired</code> argument can be set to TRUE if the values of
the <code>x_var</code> variables were observed in the same individuals
in all levels of each covariates. In this case, the calculation of the
GMR CIs is based upon a paired t-test rather than an unpaired t-test.
Study designs in which individuals are their own control could provide
data amenable to the use of the <code>paired</code> argument.</p>
<p>The <code>var.equal</code> argument cane be set to FALSE if equal
variance between the test and reference groups should NOT be assumed
during the t-test.</p>
<p>The <code>sep</code> argument can be set to an alternative character,
in the unforeseen case where tab characters between the CI’s and n’s are
not desirable in the GM and GMR labels.</p>
</div>
</div>
<div class="section level2">
<h2 id="make_forestplot">
<code>make_forestplot</code><a class="anchor" aria-label="anchor" href="#make_forestplot"></a>
</h2>
<p>Although the <code>make_forestplot</code> function ultimately returns
a <code>ggplot</code> object, it does not rely upon the classic
layer-based syntax of <code>ggplot2</code>. Users must call it once per
plot and provide the appropriate arguments defining the properties of
the plot. Nevertheless, the output of <code>make_forestplot</code> can
be modified by standard <code>ggplot2</code> functions, since it is a
<code>ggplot</code> object.</p>
<p>The use and meaning of the different arguments of
<code>make_forestplot</code> are illustrated in the examples below. Note
that the code sections are hidden by default. Click on the Show / Hide
button on the upper right side of each plot to display or hide the
corresponding R code sections.</p>
<div class="section level3">
<h3 id="basic-design">Basic design<a class="anchor" aria-label="anchor" href="#basic-design"></a>
</h3>
<p>In the example below, the <code>gmr25_aucss</code> object is
re-created using custom reference levels and labels. In the call to
<code>make_forestplot</code>:</p>
<ul>
<li>The <code>x</code>, <code>xmin</code>, and <code>xmax</code>
arguments are set to the variables storing the GMRs and the associated
lower and upper limits of CI in the <code>data</code> object;</li>
<li>The <code>y</code> variable is set to the variable storing the
different covariate levels;</li>
<li>The <code>facet</code> variable is set to the variable storing the
covariate labels;</li>
<li>The <code>label</code> variable is set to the variable storing the
GMR labels (in this case GMR + n labels);</li>
<li>The <code>vline_primary</code> and <code>vline_secondary</code>
arguments define some primary and secondary values of references;</li>
<li>The <code>fatten</code> argument control the thickness of symbols
and lines on the plots;</li>
<li>The <code>small_font</code> argument is passed down to a call to
<code>theme_cognigen_grid</code> and controls whether a smaller font
size is used for text displays;</li>
<li>The <code>xlb</code>, <code>ylb</code> (not used below), and
<code>title</code> are character or expression objects defining axis and
plot titles.</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr25_aucss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_gmr_data.html">make_gmr_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">expo25</span>,</span>
<span>  x_var <span class="op">=</span> <span class="st">'AUCSS'</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">'ID'</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AGE'</span>, <span class="st">'WTKG'</span>, <span class="st">'BMI'</span>, <span class="st">'SEXF'</span>, <span class="st">'RFCAT'</span>, <span class="st">'CPCAT'</span>, <span class="st">'HFM'</span><span class="op">)</span>,</span>
<span>  ref_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Age'</span><span class="op">~</span><span class="st">'(y)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Weight'</span><span class="op">~</span><span class="st">'(kg)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Mass'</span><span class="op">~</span><span class="st">'Index'</span><span class="op">~</span><span class="st">'(kg/'</span><span class="op">*</span><span class="va">m</span><span class="op">^</span><span class="fl">2</span><span class="op">*</span><span class="st">')'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Sex'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Renal'</span><span class="op">~</span><span class="st">'Function'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Hepatic'</span><span class="op">~</span><span class="st">'Function'</span><span class="op">~</span><span class="st">'(Child-Pugh)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Meal'</span><span class="op">~</span><span class="st">'Status'</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr25_aucss</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">~</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">24</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">p1</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
<p><strong>Note that, although the alignment of the n counts appears
incorrect on the right of the plot shown above, it will be correct once
the plot in save to a png file.</strong></p>
<p>When GMR labels are not desired, the <code>label</code> argument can
be set to NULL or simply not included in the call.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr25_aucss</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">~</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">24</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-9-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="NSE">Non-standard evaluation<a class="anchor" aria-label="anchor" href="#NSE"></a>
</h3>
<p>Below, tidyverse-style syntax and unquoted variables are used to
reproduce the same forest plot as above.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr25_aucss</span> <span class="op">&lt;-</span> <span class="va">expo25</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="../reference/make_gmr_data.html">make_gmr_data</a></span><span class="op">(</span></span>
<span>    x_var <span class="op">=</span> <span class="va">AUCSS</span>,</span>
<span>    id_var <span class="op">=</span> <span class="va">ID</span>,</span>
<span>    covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">AGE</span>, <span class="va">WTKG</span>, <span class="va">BMI</span>, <span class="va">SEXF</span>, <span class="va">RFCAT</span>, <span class="va">CPCAT</span>, <span class="va">HFM</span><span class="op">)</span>,</span>
<span>    ref_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Age'</span><span class="op">~</span><span class="st">'(y)'</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Weight'</span><span class="op">~</span><span class="st">'(kg)'</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Mass'</span><span class="op">~</span><span class="st">'Index'</span><span class="op">~</span><span class="st">'(kg/'</span><span class="op">*</span><span class="va">m</span><span class="op">^</span><span class="fl">2</span><span class="op">*</span><span class="st">')'</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Sex'</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Renal'</span><span class="op">~</span><span class="st">'Function'</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Hepatic'</span><span class="op">~</span><span class="st">'Function'</span><span class="op">~</span><span class="st">'(Child-Pugh)'</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Meal'</span><span class="op">~</span><span class="st">'Status'</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    silent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr25_aucss</span>,</span>
<span>  y <span class="op">=</span> <span class="va">value</span>, x <span class="op">=</span> <span class="va">gmr</span>, xmin <span class="op">=</span> <span class="va">gmr_lo</span>, xmax <span class="op">=</span> <span class="va">gmr_hi</span>,</span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facet <span class="op">=</span> <span class="va">y_label</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">~</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">24</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">p1</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="defining-what-n-is">Defining what <code>n</code> is<a class="anchor" aria-label="anchor" href="#defining-what-n-is"></a>
</h3>
<p>By default, forest plots created with <code>make_forestplot</code>
identify a data point as an individual (see footnote of the 1st plot in
the previous section). You can use the <code>n_label</code> argument to
change this default if necessary:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr25_aucss</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">~</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">24</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  n_label <span class="op">=</span> <span class="st">'patient'</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-11-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="logarithmic-scale-for-x-axis">Logarithmic scale for x-axis<a class="anchor" aria-label="anchor" href="#logarithmic-scale-for-x-axis"></a>
</h3>
<p>The scale of the X-axis can be changed to logarithmic scale as
follows (see stratification section below if log scale and
stratification are simultaneously needed):</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p1</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span></span>
<span>  trans <span class="op">=</span> <span class="st">'log10'</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="fl">1</span>, <span class="fl">1.1</span>, <span class="fl">1.2</span>, <span class="fl">1.3</span>, <span class="fl">1.4</span><span class="op">)</span>,</span>
<span>  labels <span class="op">=</span> <span class="va">format_continuous_cognigen</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-12-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="highlight-reference-group">Highlight reference group<a class="anchor" aria-label="anchor" href="#highlight-reference-group"></a>
</h3>
<p>The reference group can be displayed with a unique symbol when the
<code>reference</code> argument is set to the logical variable storing
with information in <code>data</code></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr25_aucss</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  reference <span class="op">=</span> <span class="st">'reference'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">~</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">24</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-13-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="reordering-covariate-groups">Reordering covariate groups<a class="anchor" aria-label="anchor" href="#reordering-covariate-groups"></a>
</h3>
<p>As mentioned above, the <code>y_var</code>, <code>y_label</code>, and
<code>value</code> variables in the output of <code>make_gmr_data</code>
are coerced to factors to facilitate plotting using
<code>make_forestplot</code>. Within a series of covariate levels, the
reference level is always listed first in the output data.frame. This
may not always be desirable.</p>
<p>Users can modify the reorder the levels of the <code>value</code>
factor to modify the</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr25_aucss</span> <span class="op">&lt;-</span> <span class="va">gmr25_aucss</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    value_mod <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">value</span>, <span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">4</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">10</span>, <span class="fl">9</span>, <span class="fl">11</span><span class="op">:</span><span class="fl">20</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">gmr25_aucss</span><span class="op">$</span><span class="va">value</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "[45,65)"             "[18,45)"             "[65,90]"            </span></span>
<span><span class="co">#&gt;  [4] "[80,89.1)"           "[36,70.2)"           "[70.2,80)"          </span></span>
<span><span class="co">#&gt;  [7] "[89.1,100)"          "[100,175]"           "[25,30)"            </span></span>
<span><span class="co">#&gt; [10] "[14.1,25)"           "[30,40)"             "[40,57.9]"          </span></span>
<span><span class="co">#&gt; [13] "Male"                "Female"              "Normal"             </span></span>
<span><span class="co">#&gt; [16] "Mild Impairment"     "Moderate Impairment" "Severe Impairment"  </span></span>
<span><span class="co">#&gt; [19] "Fasted"              "High fat meal"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">gmr25_aucss</span><span class="op">$</span><span class="va">value_mod</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "[18,45)"             "[45,65)"             "[65,90]"            </span></span>
<span><span class="co">#&gt;  [4] "[36,70.2)"           "[70.2,80)"           "[80,89.1)"          </span></span>
<span><span class="co">#&gt;  [7] "[89.1,100)"          "[100,175]"           "[14.1,25)"          </span></span>
<span><span class="co">#&gt; [10] "[25,30)"             "[30,40)"             "[40,57.9]"          </span></span>
<span><span class="co">#&gt; [13] "Male"                "Female"              "Normal"             </span></span>
<span><span class="co">#&gt; [16] "Mild Impairment"     "Moderate Impairment" "Severe Impairment"  </span></span>
<span><span class="co">#&gt; [19] "Fasted"              "High fat meal"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr25_aucss</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value_mod'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  reference <span class="op">=</span> <span class="st">'reference'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">~</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">24</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-14-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="coloring">Coloring<a class="anchor" aria-label="anchor" href="#coloring"></a>
</h3>
<p>If the <code>color</code> argument is added to the call to
<code>make_forestplot</code>, the data shown in the forest plot can be
colored according to the value of the defined variable. This requires
that the data object passed to the function include a relevant value,
which typically has to be created after execution of the
<code>make_gmr_data</code> function. For instance, it may be useful to
color the GMR based upon their location with respect to the
<code>vline_secondary</code> boundaries as shown below.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr25_aucss</span> <span class="op">&lt;-</span> <span class="va">gmr25_aucss</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">gmr</span><span class="op">)</span>,</span>
<span>        <span class="fl">1</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>          <span class="va">gmr</span> <span class="op">&gt;=</span> <span class="fl">0.8</span> <span class="op">&amp;</span> <span class="va">gmr</span> <span class="op">&lt;=</span> <span class="fl">1.25</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span> <span class="va">gmr_lo</span> <span class="op">&lt;</span> <span class="fl">0.8</span> <span class="op">|</span> <span class="va">gmr_hi</span> <span class="op">&gt;</span> <span class="fl">1.25</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span> <span class="va">gmr_hi</span> <span class="op">&lt;</span> <span class="fl">0.8</span> <span class="op">|</span> <span class="va">gmr_lo</span> <span class="op">&gt;</span> <span class="fl">1.25</span>, <span class="fl">4</span>, <span class="fl">3</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'CI inside limits'</span>, <span class="st">'CI partially outside limits'</span>, <span class="st">'GMR outside limits'</span>, <span class="st">'CI fully ouside limits'</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr25_aucss</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value_mod'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  color <span class="op">=</span> <span class="st">'group'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  reference <span class="op">=</span> <span class="st">'reference'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">~</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">24</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'#008000'</span>, <span class="st">'#0000FF'</span>, <span class="st">'#FFA000'</span>, <span class="st">'#FF0000'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">''</span><span class="op">)</span>  <span class="co"># to remove the legend title</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-15-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="stratification">Stratification<a class="anchor" aria-label="anchor" href="#stratification"></a>
</h3>
<p>If the <code>data</code> object passed to
<code>make_forestplot</code> contains multiple records per combinations
of the <code>y</code> and <code>color</code> variables, the function
automatically detects that the data must be stratified and colored in
the forest plot.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_gmr_data.html">make_gmr_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">expo</span>,</span>
<span>  x_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AUCSS'</span>, <span class="st">'CMAXSS'</span>, <span class="st">'CMINSS'</span><span class="op">)</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">'ID'</span>,</span>
<span>  by <span class="op">=</span> <span class="st">'DOSE'</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AGE'</span>, <span class="st">'WTKG'</span>, <span class="st">'BMI'</span>, <span class="st">'SEXF'</span>, <span class="st">'RFCAT'</span>, <span class="st">'CPCAT'</span>, <span class="st">'HFM'</span><span class="op">)</span>,</span>
<span>  ref_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Age'</span><span class="op">~</span><span class="st">'(y)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Weight'</span><span class="op">~</span><span class="st">'(kg)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Mass'</span><span class="op">~</span><span class="st">'Index'</span><span class="op">~</span><span class="st">'(kg/'</span><span class="op">*</span><span class="va">m</span><span class="op">^</span><span class="fl">2</span><span class="op">*</span><span class="st">')'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Sex'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Renal'</span><span class="op">~</span><span class="st">'Function'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Hepatic'</span><span class="op">~</span><span class="st">'Function'</span><span class="op">~</span><span class="st">'(Child-Pugh)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Meal'</span><span class="op">~</span><span class="st">'Status'</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">gmr_all</span>, <span class="va">x_var</span> <span class="op">==</span> <span class="st">'AUCSS'</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  color <span class="op">=</span> <span class="st">'by'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">~</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">24</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/scale_discrete_cognigen.html">scale_discrete_cognigen</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">''</span><span class="op">)</span>  <span class="co"># to remove the legend title</span></span>
<span><span class="va">p2</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-16-1.png" width="672"></p>
<p>Because the implementation of stratification requires the use of
facet-specific scales, the X-axis scale cannot be change globally. If a
logarithmic scale is required, users must apply the approach illustrated
in the example below. In brief, a <code>scale_x_continuous</code>
function is created and applied to each panel using the
<code><a href="https://teunbrand.github.io/ggh4x/reference/facetted_pos_scales.html" class="external-link">ggh4x::facetted_pos_scales</a></code> function. A list with as many
levels as there are panels must be created.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">logscale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_continuous</a></span><span class="op">(</span></span>
<span>  trans <span class="op">=</span> <span class="st">'log10'</span>,</span>
<span>  breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="fl">1</span>, <span class="fl">1.1</span>, <span class="fl">1.2</span>, <span class="fl">1.3</span>, <span class="fl">1.4</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span>
<span><span class="va">p2</span> <span class="op">+</span></span>
<span>  <span class="fu">ggh4x</span><span class="fu">::</span><span class="fu"><a href="https://teunbrand.github.io/ggh4x/reference/facetted_pos_scales.html" class="external-link">facetted_pos_scales</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="co"># one element per panel</span></span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-17-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="multiple-exposures">Multiple exposures<a class="anchor" aria-label="anchor" href="#multiple-exposures"></a>
</h3>
<p>Displaying GMRs for multiple exposures on the same plots is not
directly possible with <code>make_forestplot</code> but this design can
be achieved using the following approach:</p>
<ol style="list-style-type: decimal">
<li>Users must create one forest plot per exposure;</li>
<li>All N plots must share the same X-axis limits and the same
<code>vline_primary</code> and <code>vline_secondary</code>
settings;</li>
<li>For all plots above the bottom one, the title of the X-axis and the
footnote must be turned off;</li>
<li>The Y-axis title is used to information about the exposures
associated which each individual forest plots;</li>
<li>An empty ggplot plot object must be created; and</li>
<li>A Nx2 layout must be created and the plots arranged with
<code><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html" class="external-link">ggpubr::ggarrange</a></code> as shown below (not that the second
column of plot is necessary to circumvent a bug with
<code>ggarrange</code> with does not properly process the secondary
y-axis axis showing the GMR labels).</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr25_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_gmr_data.html">make_gmr_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">expo25</span>,</span>
<span>  x_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AUCSS'</span>, <span class="st">'CMAXSS'</span>, <span class="st">'CMINSS'</span><span class="op">)</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">'ID'</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AGE'</span>, <span class="st">'WTKG'</span>, <span class="st">'HFM'</span><span class="op">)</span>,</span>
<span>  ref_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Age'</span><span class="op">~</span><span class="st">'(y)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Weight'</span><span class="op">~</span><span class="st">'(kg)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Meal'</span><span class="op">~</span><span class="st">'Status'</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">p1_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">gmr25_all</span>, <span class="va">x_var</span> <span class="op">==</span> <span class="st">'CMINSS'</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">C</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">*</span><span class="va">trough</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1.3</span><span class="op">)</span> <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span> caption <span class="op">=</span> <span class="cn">NULL</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">p1_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">gmr25_all</span>, <span class="va">x_var</span> <span class="op">==</span> <span class="st">'AUCSS'</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  ylb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">12</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1.3</span><span class="op">)</span> <span class="op">)</span></span>
<span></span>
<span><span class="va">p2_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span>
<span>  <span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html" class="external-link">ggarrange</a></span><span class="op">(</span></span>
<span>    <span class="va">p1_1</span>, <span class="va">p2_1</span>, <span class="va">p1_2</span>,</span>
<span>    nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>    heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.45</span>, <span class="fl">0.55</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-18-1.png" width="672"></p>
</div>
<div class="section level3">
<h3 id="all-at-once">All-at-once<a class="anchor" aria-label="anchor" href="#all-at-once"></a>
</h3>
<p>In this example, all possible options are use. The combination of
data stratification, display of multiple exposures, and logarithmic
scale requires additional tricks:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="https://teunbrand.github.io/ggh4x/reference/facetted_pos_scales.html" class="external-link">ggh4x::facetted_pos_scales</a></code> must be called to apply the
logarithmic scale to each forest plot;</li>
<li>The legend must be suppressed in each forest plot. However, it must
be extracted with <code><a href="https://rpkgs.datanovia.com/ggpubr/reference/get_legend.html" class="external-link">ggpubr::get_legend</a></code> in at least 1 forest
plot before being suppressed;</li>
<li>A nest layout must be used to vertically center the legend: in the
case below, a 2x2 layout within a 1x2 layout.</li>
</ol>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gmr_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_gmr_data.html">make_gmr_data</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">expo</span>,</span>
<span>  x_var <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AUCSS'</span>, <span class="st">'CMAXSS'</span>, <span class="st">'CMINSS'</span><span class="op">)</span>,</span>
<span>  id_var <span class="op">=</span> <span class="st">'ID'</span>,</span>
<span>  covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AGE'</span>, <span class="st">'WTKG'</span>, <span class="st">'HFM'</span><span class="op">)</span>,</span>
<span>  ref_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  by <span class="op">=</span> <span class="st">'DOSE'</span>,</span>
<span>  labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Age'</span><span class="op">~</span><span class="st">'(y)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Body'</span><span class="op">~</span><span class="st">'Weight'</span><span class="op">~</span><span class="st">'(kg)'</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">'Meal'</span><span class="op">~</span><span class="st">'Status'</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="va">p1_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">gmr_all</span>, <span class="va">x_var</span> <span class="op">==</span> <span class="st">'CMINSS'</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  color <span class="op">=</span> <span class="st">'by'</span>,</span>
<span>  reference <span class="op">=</span> <span class="st">'reference'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">C</span><span class="op">[</span><span class="va">ss</span><span class="op">*</span><span class="st">','</span><span class="op">*</span><span class="va">trough</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggh4x</span><span class="fu">::</span><span class="fu"><a href="https://teunbrand.github.io/ggh4x/reference/facetted_pos_scales.html" class="external-link">facetted_pos_scales</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="../reference/get_style_colors.html">get_style_colors</a></span><span class="op">(</span><span class="fu"><a href="../reference/cognigen_style.html">cognigen_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1.3</span><span class="op">)</span> <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span> caption <span class="op">=</span> <span class="cn">NULL</span> <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">''</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract the legend before suppressing it</span></span>
<span><span class="va">plegend</span> <span class="op">&lt;-</span> <span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/get_legend.html" class="external-link">get_legend</a></span><span class="op">(</span><span class="va">p1_1</span><span class="op">)</span></span>
<span><span class="va">p1_1</span> <span class="op">&lt;-</span> <span class="va">p1_1</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p1_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_forestplot.html">make_forestplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">gmr_all</span>, <span class="va">x_var</span> <span class="op">==</span> <span class="st">'AUCSS'</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="st">'value'</span>, x <span class="op">=</span> <span class="st">'gmr'</span>, xmin <span class="op">=</span> <span class="st">'gmr_lo'</span>, xmax <span class="op">=</span> <span class="st">'gmr_hi'</span>,</span>
<span>  label <span class="op">=</span> <span class="st">'gmr_n_label'</span>,</span>
<span>  facet <span class="op">=</span> <span class="st">'y_label'</span>,</span>
<span>  color <span class="op">=</span> <span class="st">'by'</span>,</span>
<span>  reference <span class="op">=</span> <span class="st">'reference'</span>,</span>
<span>  vline_primary <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  vline_secondary <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">1.25</span><span class="op">)</span>,</span>
<span>  xlb <span class="op">=</span> <span class="st">'Geometric Mean Ratio [90% confidence interval]'</span>,</span>
<span>  ylb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">AUC</span><span class="op">[</span><span class="fl">0</span> <span class="op">~</span><span class="st">'-'</span><span class="op">~</span><span class="fl">12</span><span class="op">~</span><span class="va">h</span><span class="op">]</span><span class="op">~</span><span class="st">'(nmol'</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="st">'h/L)'</span><span class="op">)</span>,</span>
<span>  fatten <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  small_font <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span>  <span class="op">+</span></span>
<span>  <span class="fu">ggh4x</span><span class="fu">::</span><span class="fu"><a href="https://teunbrand.github.io/ggh4x/reference/facetted_pos_scales.html" class="external-link">facetted_pos_scales</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span>,</span>
<span>      <span class="va">logscale</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span></span>
<span>    values <span class="op">=</span> <span class="fu"><a href="../reference/get_style_colors.html">get_style_colors</a></span><span class="op">(</span><span class="fu"><a href="../reference/cognigen_style.html">cognigen_style</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1.3</span><span class="op">)</span> <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p2_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span></span>
<span>  <span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html" class="external-link">ggarrange</a></span><span class="op">(</span></span>
<span>  <span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html" class="external-link">ggarrange</a></span><span class="op">(</span></span>
<span>    <span class="va">p1_1</span>, <span class="va">p2_1</span>, <span class="va">p1_2</span>, </span>
<span>    nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span>, </span>
<span>    widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>    heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.475</span>, <span class="fl">0.525</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="va">plegend</span>,</span>
<span>  nrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  ncol <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.85</span>, <span class="fl">0.15</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="forest_files/figure-html/unnamed-chunk-19-1.png" width="672"></p>
<p>Note that it is not recommended to use
<code>scale_discrete_cognigen</code> with <code>make_forestplot</code>
as it would override some scale settings defined with the function
itself. Instead use <code>scale_color_manual</code> combined with
<code>get_style_colors</code> as illustrated above.</p>
</div>
</div>
<div class="section level2">
<h2 id="make_gmr_table">
<code>make_gmr_table</code><a class="anchor" aria-label="anchor" href="#make_gmr_table"></a>
</h2>
<p><code>make_gmr_table</code> creates report-ready tables of GMs and
GMRs data in HTML, Microsoft Word, or PharmTeX-compliant format. This is
a relatively simple function which only makes a few assumptions about
the data it processes. It was designed to print the output of the
<code>make_gmr_data</code> output data.frame but typically requires that
data.frame to be slightly modified beforehand. These modifications may
include dropping one or more unnecessary variables and converting
expression into character objects (using the <code>expr2char</code>
utility function).</p>
<p>Users will be able to set the name of the output table file, request
the desired format, and set custom table headers and add a list of
custom abbreviations to those that are automatically included by
<code>make_gmr_table</code> (i.e., CI and n).</p>
<p><code>make_gmr_table</code> can creates one or more table files at a
time, as illustrated below.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Preprocessing </span></span>
<span><span class="va">gmr_table_data</span> <span class="op">&lt;-</span> <span class="va">gmr_all</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'x_var'</span>, <span class="st">'y_label'</span>, <span class="st">'value'</span>, <span class="st">'by'</span>, <span class="st">'n'</span>, <span class="st">'gm_label'</span>,<span class="st">'gmr_label'</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">gmr_table_data</span><span class="op">[</span>, <span class="st">'y_label'</span><span class="op">]</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_gmr_table.html">expr2char</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">gmr_table_data</span><span class="op">[</span>, <span class="st">'y_label'</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Request html table</span></span>
<span><span class="fu"><a href="../reference/make_gmr_table.html">make_gmr_table</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr_table_data</span>,</span>
<span>  file <span class="op">=</span> <span class="st">'gmtable.html'</span>,</span>
<span>  format <span class="op">=</span> <span class="st">'html'</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">'Exposure Measure'</span>,</span>
<span>    <span class="st">'Covariate'</span>,</span>
<span>    <span class="st">'Group'</span>,</span>
<span>    <span class="st">'Dose'</span>,</span>
<span>    <span class="st">'n'</span>,</span>
<span>    <span class="st">'Geometric Mean [90% CI]'</span>,</span>
<span>    <span class="st">'Geometric Mean Ratio [90% CI]'</span></span>
<span>  <span class="op">)</span>,</span>
<span>  abbreviations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    ABC <span class="op">=</span> <span class="st">'Some custom variable'</span>,</span>
<span>    XYZ <span class="op">=</span> <span class="st">'Another custom variable'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Request Word table</span></span>
<span><span class="fu"><a href="../reference/make_gmr_table.html">make_gmr_table</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr_table_data</span>,</span>
<span>  file <span class="op">=</span> <span class="st">'gmtable.docx'</span>,</span>
<span>  format <span class="op">=</span> <span class="st">'word'</span>,</span>
<span>  title <span class="op">=</span> <span class="st">'Mouh'</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">'Exposure Measure'</span>,</span>
<span>    <span class="st">'Covariate'</span>,</span>
<span>    <span class="st">'Group'</span>,</span>
<span>    <span class="st">'n'</span>,</span>
<span>    <span class="st">'Geometric Mean [90% CI]'</span>,</span>
<span>    <span class="st">'Geometric Mean Ratio [90% CI]'</span></span>
<span>  <span class="op">)</span>,</span>
<span>  abbreviations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    ABC <span class="op">=</span> <span class="st">'Some custom variable'</span>,</span>
<span>    XYZ <span class="op">=</span> <span class="st">'Another custom variable'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Request both with one call</span></span>
<span><span class="fu"><a href="../reference/make_gmr_table.html">make_gmr_table</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">gmr_table_data</span>,</span>
<span>  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'gmtable.html, gmtable.docx'</span><span class="op">)</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'html'</span>, <span class="st">'word'</span><span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="st">'Mouh'</span>,</span>
<span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">'Exposure Measure'</span>,</span>
<span>    <span class="st">'Covariate'</span>,</span>
<span>    <span class="st">'Group'</span>,</span>
<span>    <span class="st">'n'</span>,</span>
<span>    <span class="st">'Geometric Mean [90% CI]'</span>,</span>
<span>    <span class="st">'Geometric Mean Ratio [90% CI]'</span></span>
<span>  <span class="op">)</span>,</span>
<span>  abbreviations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    ABC <span class="op">=</span> <span class="st">'Some custom variable'</span>,</span>
<span>    XYZ <span class="op">=</span> <span class="st">'Another custom variable'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Sebastien Bihorel, Nash Delcamp.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
